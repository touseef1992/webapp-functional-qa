<!-- demo_webapp/templates/dashboard.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dashboard — Demo Web App</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Simple dark stylesheet for the demo dashboard */
    :root{
      --bg:#0f1112; --card:#111416; --muted:#8c9aa3; --accent:#2aa9ff;
      --card-radius:14px;
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#e9eef2}
    .wrap{max-width:1200px;margin:24px auto;padding:0 24px}
    header{display:flex;align-items:center;justify-content:center;margin-bottom:18px}
    .logo{
      width:64px;height:64px;border-radius:12px;background:#081018;display:flex;align-items:center;justify-content:center;
      box-shadow: 0 8px 22px rgba(0,0,0,.8);
      position:relative; top:-10px;
    }
    .title{margin-left:12px;font-weight:700;color:var(--accent);font-size:1.25rem}
    .top-right{position:fixed;right:24px;top:24px;text-align:right;color:var(--muted);font-size:0.95rem}
    .stat-row{display:flex;gap:18px;margin:8px 0 20px 0;flex-wrap:wrap}
    .stat{background:var(--card);padding:18px;border-radius:12px;min-width:170px;box-shadow: 0 8px 20px rgba(0,0,0,.6)}
    h1{font-size:2rem;margin:0 0 8px 0}
    .grid{display:grid;grid-template-columns: 1fr 340px;gap:20px}
    .card{background:var(--card);padding:18px;border-radius:var(--card-radius);box-shadow: 0 12px 30px rgba(0,0,0,.6)}
    .card h3{margin:0 0 10px 0;color:#fff}
    /* Sessions list (kept) */
    .sessions-list{display:flex;gap:12px;align-items:flex-start}
    .legend{margin-left:20px}
    .legend li{list-style:none;margin:8px 0;color:var(--muted)}
    .legend .color {display:inline-block;width:14px;height:14px;margin-right:8px;border-radius:4px;vertical-align:middle}
    .color.na{background:#2aa9ff}
    .color.eu{background:#2ad7a0}
    .color.in{background:#f2c94c}
    .color.se{background:#f28fb1}
    .devices{display:flex;gap:10px;margin-top:12px}
    .device{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;min-width:88px;text-align:center}
    /* Page traffic mock */
    .chart-hr{height:90px;background:linear-gradient(180deg,#0b2430 0,#07101a 100%);border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
    .browsers li{margin:8px 0;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    .bar{height:10px;background:#0a1012;border-radius:8px;flex:1;margin:0 12px;position:relative}
    .bar > i{position:absolute;left:0;top:0;height:100%;background:var(--accent);display:block;border-radius:8px}
    .activity li, .recent li{list-style:none;margin-bottom:12px;color:var(--muted)}
    small{color:var(--muted)}
    /* responsive */
    @media (max-width:980px){
      .grid{grid-template-columns:1fr; }
      .top-right{position:static;text-align:left;margin-bottom:12px}
    }
  </style>
</head>
<body>
  <div class="top-right" aria-live="polite">
    <div><strong>Theme</strong> &nbsp; <span>{{ theme }}</span></div>
    <div><strong>Date</strong> &nbsp; <span id="live-date">{{ today_date }}</span></div>
    <div><strong>Time</strong> &nbsp; <span id="live-time">{{ now_time }}</span></div>
  </div>

  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true">
        <!-- little icon -->
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="24" height="24" rx="5" fill="#071823"/>
          <path d="M4 14 L9 9 L13 13 L20 6" stroke="#2aa9ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div style="margin-left:14px">
        <div class="title">Demo Web App</div>
        <div style="color:var(--muted);font-size:0.9rem">Signup · Login · Dashboard</div>
      </div>
    </header>

    <h1>Dashboard</h1>
    <small style="color:var(--muted)">Overview</small>

    <div class="stat-row">
      <div class="stat">Total Users<br><strong style="font-size:1.25rem">{{ total_users }}</strong></div>
      <div class="stat">Active Sessions<br><strong style="font-size:1.25rem">{{ active_sessions }}</strong></div>
      <div class="stat">Signups Today<br><strong style="font-size:1.25rem">{{ signups_today }}</strong></div>
      <div class="stat">Open Issues<br><strong style="font-size:1.25rem">{{ open_issues }}</strong></div>
    </div>

    <div class="grid">
      <!-- left main -->
      <div>
        <div class="card" aria-labelledby="sessions-title">
          <h3 id="sessions-title">User Sessions Map</h3>

          <!-- removed donut per your last message. kept the session legend and totals -->
          <div style="display:flex;align-items:flex-start;gap:18px">
            <!-- big placeholder circle removed; we show stats only -->
            <div style="flex:0 0 80%">
              <div style="background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:14px;border-radius:10px;min-height:140px">
                <div style="color:var(--muted);font-size:0.95rem;margin-bottom:8px">Sessions</div>
                <div style="font-size:1.8rem;font-weight:800;color:#fff">{{ sessions.total }}</div>
                <ul style="padding-left:0;margin-top:12px;font-size:0.95rem;color:var(--muted)">
                  <li>North America {{ sessions.north_america }} ({{ sessions.north_america|int * 100 // sessions.total if sessions.total else 0 }}%)</li>
                  <li>Europe {{ sessions.europe }} ({{ sessions.europe|int * 100 // sessions.total if sessions.total else 0 }}%)</li>
                  <li>India {{ sessions.india }} ({{ sessions.india|int * 100 // sessions.total if sessions.total else 0 }}%)</li>
                  <li>SEA {{ sessions.sea }} ({{ sessions.sea|int * 100 // sessions.total if sessions.total else 0 }}%)</li>
                </ul>
              </div>

              <div class="devices" role="list" aria-label="device counts">
                <div class="device"><div style="font-size:0.9rem;color:var(--muted)">Desktop</div><div style="font-weight:700">{{ devices.desktop }}</div></div>
                <div class="device"><div style="font-size:0.9rem;color:var(--muted)">Mobile</div><div style="font-weight:700">{{ devices.mobile }}</div></div>
                <div class="device"><div style="font-size:0.9rem;color:var(--muted)">Tablet</div><div style="font-weight:700">{{ devices.tablet }}</div></div>
              </div>
            </div>

            <div style="flex:0 0 220px">
              <ul class="legend" aria-hidden="false">
                <li><span class="color na"></span> North America</li>
                <li><span class="color eu"></span> Europe</li>
                <li><span class="color in"></span> India</li>
                <li><span class="color se"></span> SEA</li>
              </ul>
            </div>
          </div>
        </div>

        <div style="height:18px"></div>

        <div class="card" aria-labelledby="activity-title">
          <h3 id="activity-title">Activity</h3>
          <ul class="activity">
            {% for act in activity %}
            <li><strong style="color:#fff">{{ act.title }}</strong> — <span style="color:var(--muted)">{{ act.detail }}</span><br><small>{{ act.when }}</small></li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <!-- right column -->
      <div>
        <div class="card">
          <h3>Page traffic (7 days)</h3>
          <div class="chart-hr">Small chart placeholder</div>
        </div>

        <div style="height:14px"></div>

        <div class="card">
          <h3>Browsers</h3>
          <ul class="browsers">
            {% for b in browsers %}
            <li>
              <span style="color:var(--muted)">{{ b.name }}</span>
              <div style="display:flex;align-items:center;flex:1;margin-left:12px">
                <div class="bar" aria-hidden="true"><i style="width:{{ b.pct|replace('%','') }}%"></i></div>
                <div style="width:44px;text-align:right;margin-left:8px;color:var(--muted)">{{ b.pct }}</div>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>

        <div style="height:14px"></div>

        <div class="card">
          <h3>Recent signups</h3>
          <ul class="recent">
            {% for r in recent_signups %}
            <li><strong style="color:#fff">{{ r.email }}</strong><br><small style="color:var(--muted)">{{ r.when }}</small></li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // live clock updater (updates every second)
    function updateClock(){
      const t = new Date();
      const hh = String(t.getHours()).padStart(2,'0');
      const mm = String(t.getMinutes()).padStart(2,'0');
      const ss = String(t.getSeconds()).padStart(2,'0');
      document.getElementById('live-time').textContent = hh+':'+mm+':'+ss;
      document.getElementById('live-date').textContent = t.toISOString().slice(0,10);
    }
    updateClock();
    setInterval(updateClock,1000);
  </script>
</body>
</html>
